{"openapi":"3.0.2","info":{"title":"Cats And Dragons","description":"Warning, this API is only for internal use. Do not expose this out to the public. This API may be slow at times and may hang or error. Please do not share any tracebacks!","version":"1.0"},"paths":{"/subjects":{"put":{"tags":["Internal"],"summary":"Add Or Edit Subject","description":"**NOTE** A restart is needed for some changes to take effect","operationId":"add_or_edit_subject","parameters":[{"description":"Friendly name for the subject that is user-visible","required":true,"schema":{"title":"Subject Name Friendly","type":"string","description":"Friendly name for the subject that is user-visible"},"name":"subject_name_friendly","in":"query"},{"description":"Internal subject name. This must not have spaces, numbers or any special character other than hyphens and is not user-visible","required":true,"schema":{"title":"Subject Name Internal","pattern":"^(?![0-9.-])(?!.*[0-9.-]$)(?!.*\\d-)(?!.*-\\d)[a-zA-Z0-9-]+$","type":"string","description":"Internal subject name. This must not have spaces, numbers or any special character other than hyphens and is not user-visible","minlength":2},"name":"subject_name_internal","in":"query"},{"description":"Description for the subject. This is just there in case we want it in the future (and so we can be more like Khan Academy in design)","required":true,"schema":{"title":"Description","type":"string","description":"Description for the subject. This is just there in case we want it in the future (and so we can be more like Khan Academy in design)"},"name":"description","in":"query"},{"description":"Image for the subject. This is just there in case we want it in the future (and so we can be more like Khan Academy in design)","required":true,"schema":{"title":"Image","type":"string","description":"Image for the subject. This is just there in case we want it in the future (and so we can be more like Khan Academy in design)"},"name":"image","in":"query"},{"description":"(Internal Tool Only) Alias for the subject for grade 9 and below. Example is science for biology/physics/chemistry. This is present due to current limitations in swagger. Leave blank to not alias. Only used in internal tool","required":false,"schema":{"title":"Alias","type":"string","description":"(Internal Tool Only) Alias for the subject for grade 9 and below. Example is science for biology/physics/chemistry. This is present due to current limitations in swagger. Leave blank to not alias. Only used in internal tool"},"name":"alias","in":"query"},{"description":"What grades this subject supports","required":true,"schema":{"type":"array","items":{"$ref":"#/components/schemas/Grade"},"description":"What grades this subject supports"},"name":"supported_grades","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/chapters":{"get":{"tags":["Internal"],"summary":"Get Chapters","operationId":"get_chapters","parameters":[{"required":false,"schema":{"title":"Grade","type":"integer"},"name":"grade","in":"query"},{"required":false,"schema":{"title":"Board","type":"string"},"name":"board","in":"query"},{"required":false,"schema":{"title":"Subject","type":"string"},"name":"subject","in":"query"},{"required":false,"schema":{"title":"Chapter","type":"integer"},"name":"chapter","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Chapter"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Internal"],"summary":"New Chapter","description":"Creates a new chapter in the syllabus","operationId":"new_chapter","parameters":[{"required":true,"schema":{"$ref":"#/components/schemas/Grade"},"name":"grade","in":"query"},{"required":true,"schema":{"$ref":"#/components/schemas/Board"},"name":"board","in":"query"},{"required":true,"schema":{"$ref":"#/components/schemas/Subject"},"name":"subject","in":"query"},{"description":"Name of the chapter","required":true,"schema":{"title":"Name","type":"string","description":"Name of the chapter"},"name":"name","in":"query"},{"description":"Internal chapter name. This must not have spaces, numbers or any special character other than hyphens and is not user-visible\n\n**Do not reuse the same internal name more than once**","required":true,"schema":{"title":"Iname","pattern":"^(?![0-9.-])(?!.*[0-9.-]$)(?!.*\\d-)(?!.*-\\d)[a-zA-Z0-9-]+$","type":"string","description":"Internal chapter name. This must not have spaces, numbers or any special character other than hyphens and is not user-visible\n\n**Do not reuse the same internal name more than once**","minlength":2},"name":"iname","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Internal"],"summary":"Delete Chapter","operationId":"delete_chapter","parameters":[{"required":true,"schema":{"$ref":"#/components/schemas/Grade"},"name":"grade","in":"query"},{"required":true,"schema":{"$ref":"#/components/schemas/Board"},"name":"board","in":"query"},{"required":true,"schema":{"$ref":"#/components/schemas/Subject"},"name":"subject","in":"query"},{"required":true,"schema":{"title":"Chapter","type":"integer"},"name":"chapter","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/chapter/props":{"patch":{"tags":["Internal"],"summary":"Edit Chapter Props","description":"Edits the chapter properties (currently only name and study time)","operationId":"edit_chapter_props","parameters":[{"required":true,"schema":{"$ref":"#/components/schemas/Grade"},"name":"grade","in":"query"},{"required":true,"schema":{"$ref":"#/components/schemas/Board"},"name":"board","in":"query"},{"required":true,"schema":{"$ref":"#/components/schemas/Subject"},"name":"subject","in":"query"},{"required":true,"schema":{"title":"Chapter","type":"integer"},"name":"chapter","in":"query"},{"description":"Name of the chapter","required":false,"schema":{"title":"Name","type":"string","description":"Name of the chapter"},"name":"name","in":"query"},{"description":"Study time of the chapter","required":false,"schema":{"title":"Study Time","type":"integer","description":"Study time of the chapter"},"name":"study_time","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/topics":{"put":{"tags":["Internal"],"summary":"Add Or Edit Topic","description":"Creates or updates an existing topic\n\nThis also handles initially creating the topic/subtopic in the database as well as in the YAML\n\n**NOTE** This does not handle adding videos to a topic. Use /topics/videos for that","operationId":"add_or_edit_topic","parameters":[{"required":true,"schema":{"$ref":"#/components/schemas/Grade"},"name":"grade","in":"query"},{"required":true,"schema":{"$ref":"#/components/schemas/Board"},"name":"board","in":"query"},{"required":true,"schema":{"$ref":"#/components/schemas/Subject"},"name":"subject","in":"query"},{"required":true,"schema":{"title":"Chapter","type":"integer"},"name":"chapter","in":"query"},{"description":"Position of the topic. Changing this will change the position of the topi. Set -1 for end. 0 is first position","required":false,"schema":{"title":"Position","type":"integer","description":"Position of the topic. Changing this will change the position of the topi. Set -1 for end. 0 is first position","default":-1},"name":"position","in":"query"},{"description":"The user-visible/friendly name for the topic. Use `$name` if you wish for the topic name to be the name of the chapter itself","required":true,"schema":{"title":"Topic Name Friendly","type":"string","description":"The user-visible/friendly name for the topic. Use `$name` if you wish for the topic name to be the name of the chapter itself"},"name":"topic_name_friendly","in":"query"},{"description":"Internal topic name. This must not have spaces, numbers or any special character other than hyphens and is not user-visible","required":true,"schema":{"title":"Topic Name Internal","pattern":"^(?![0-9.-])(?!.*[0-9.-]$)(?!.*\\d-)(?!.*-\\d)[a-zA-Z0-9-]+$","type":"string","description":"Internal topic name. This must not have spaces, numbers or any special character other than hyphens and is not user-visible","minlength":2},"name":"topic_name_internal","in":"query"},{"description":"Put the parent topic's internal topic name (topic_name_internal) if you wish to make a subtopic of a topic","required":false,"schema":{"title":"Subtopic Parent","type":"string","description":"Put the parent topic's internal topic name (topic_name_internal) if you wish to make a subtopic of a topic"},"name":"subtopic_parent","in":"query"},{"description":"Accept tags in scraper","required":false,"schema":{"title":"Accept Tags","type":"array","items":{"type":"string"},"description":"Accept tags in scraper"},"name":"accept_tags","in":"query"},{"description":"Reject tags in scraper","required":false,"schema":{"title":"Reject Tags","type":"array","items":{"type":"string"},"description":"Reject tags in scraper"},"name":"reject_tags","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/topics/position":{"patch":{"tags":["Internal"],"summary":"Change Topic Position","operationId":"change_topic_position","parameters":[{"required":true,"schema":{"$ref":"#/components/schemas/Grade"},"name":"grade","in":"query"},{"required":true,"schema":{"$ref":"#/components/schemas/Board"},"name":"board","in":"query"},{"required":true,"schema":{"$ref":"#/components/schemas/Subject"},"name":"subject","in":"query"},{"required":true,"schema":{"title":"Chapter","type":"integer"},"name":"chapter","in":"query"},{"description":"Position of the topic. Changing this will change the position of the topic. Set -1 for end. 0 is first position","required":false,"schema":{"title":"Position","type":"integer","description":"Position of the topic. Changing this will change the position of the topic. Set -1 for end. 0 is first position","default":-1},"name":"position","in":"query"},{"description":"Internal topic name. This must not have spaces, numbers or any special character other than hyphens and is not user-visible","required":true,"schema":{"title":"Topic Name Internal","pattern":"^(?![0-9.-])(?!.*[0-9.-]$)(?!.*\\d-)(?!.*-\\d)[a-zA-Z0-9-]+$","type":"string","description":"Internal topic name. This must not have spaces, numbers or any special character other than hyphens and is not user-visible","minlength":2},"name":"topic_name_internal","in":"query"},{"description":"Put the parent topic's internal topic name (topic_name_internal) if you wish to make a subtopic of a topic","required":false,"schema":{"title":"Subtopic Parent","type":"string","description":"Put the parent topic's internal topic name (topic_name_internal) if you wish to make a subtopic of a topic"},"name":"subtopic_parent","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/topics/resources":{"put":{"tags":["Internal"],"summary":"New Resource","description":"Create a new video or edits an existing video","operationId":"new_resource","parameters":[{"required":true,"schema":{"$ref":"#/components/schemas/Grade"},"name":"grade","in":"query"},{"required":true,"schema":{"$ref":"#/components/schemas/Board"},"name":"board","in":"query"},{"required":true,"schema":{"$ref":"#/components/schemas/Subject"},"name":"subject","in":"query"},{"required":true,"schema":{"title":"Chapter","type":"integer"},"name":"chapter","in":"query"},{"description":"Internal topic name. This must not have spaces, numbers or any special character other than hyphens and is not user-visible","required":true,"schema":{"title":"Topic Name Internal","pattern":"^(?![0-9.-])(?!.*[0-9.-]$)(?!.*\\d-)(?!.*-\\d)[a-zA-Z0-9-]+$","type":"string","description":"Internal topic name. This must not have spaces, numbers or any special character other than hyphens and is not user-visible","minlength":2},"name":"topic_name_internal","in":"query"},{"description":"Put the parent topic's internal topic name (topic_name_internal) if you wish to make a subtopic of a topic","required":false,"schema":{"title":"Subtopic Parent","type":"string","description":"Put the parent topic's internal topic name (topic_name_internal) if you wish to make a subtopic of a topic","default":""},"name":"subtopic_parent","in":"query"},{"description":"Resource type","required":true,"schema":{"allOf":[{"$ref":"#/components/schemas/ResourceList"}],"description":"Resource type"},"name":"resource_type","in":"query"},{"description":"**Optional for videos on youtube as those are gotten using the youtube api if no resource title is provided**\n\nThe title of the resource. On youtube videos, this is the name of the video by default *unless* overriden","required":false,"schema":{"title":"Resource Title","type":"string","description":"**Optional for videos on youtube as those are gotten using the youtube api if no resource title is provided**\n\nThe title of the resource. On youtube videos, this is the name of the video by default *unless* overriden"},"name":"resource_title","in":"query"},{"description":"Resource URL","required":true,"schema":{"title":"Resource Url","type":"string","description":"Resource URL"},"name":"resource_url","in":"query"},{"description":"Optional description for the resource","required":false,"schema":{"title":"Resource Description","type":"string","description":"Optional description for the resource"},"name":"resource_description","in":"query"},{"description":"**Optional for videos on youtube as those are gotten using the youtube api if no resource author is provided**.\n\nThe author of the resource","required":false,"schema":{"title":"Resource Author","type":"string","description":"**Optional for videos on youtube as those are gotten using the youtube api if no resource author is provided**.\n\nThe author of the resource"},"name":"resource_author","in":"query"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResourceMetadata"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Internal"],"summary":"Delete Resource","description":"Deletes a resource based on the resource id","operationId":"delete_resource","parameters":[{"description":"The resource id to delete from (if you wish to use a resource id to delete a resource","required":false,"schema":{"title":"Resource Id","type":"string","description":"The resource id to delete from (if you wish to use a resource id to delete a resource","format":"uuid"},"name":"resource_id","in":"query"},{"description":"Resource URL to delete based on","required":false,"schema":{"title":"Resource Url","type":"string","description":"Resource URL to delete based on"},"name":"resource_url","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/data/build":{"post":{"tags":["Internal"],"summary":"Build Data","description":"Warning: May hang the server\n\nThis will build the data needed for the client to run","operationId":"build_data","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/compilestatic":{"post":{"tags":["Internal"],"summary":"Compile Static","description":"Warning: May hang the server","operationId":"compile_static","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/git":{"post":{"tags":["Internal"],"summary":"Git","description":"Warning: May hang the server","operationId":"git","parameters":[{"required":false,"schema":{"title":"Commitmsg","type":"string","default":"Some fixes to improve stability"},"name":"commitmsg","in":"query"},{"required":false,"schema":{"allOf":[{"$ref":"#/components/schemas/GitOP"}],"default":"push"},"name":"op","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reboot":{"post":{"tags":["Internal"],"summary":"Reboot","description":"**NOTE** This will not return anything","operationId":"reboot","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Board":{"title":"Board","enum":["CBSE"],"description":"An enumeration."},"Chapter":{"title":"Chapter","required":["chapters"],"type":"object","properties":{"done":{"title":"Done","type":"boolean","default":true},"reason":{"title":"Reason","type":"string"},"chapters":{"title":"Chapters","type":"array","items":{"$ref":"#/components/schemas/ChapterData"}}}},"ChapterData":{"title":"ChapterData","required":["iname","name","grade","board","subject","study_time","topics"],"type":"object","properties":{"iname":{"title":"Iname","type":"string"},"name":{"title":"Name","type":"string"},"grade":{"title":"Grade","type":"integer"},"board":{"title":"Board","type":"string"},"subject":{"title":"Subject","type":"string"},"study_time":{"title":"Study Time","type":"integer"},"topics":{"title":"Topics","type":"object","additionalProperties":{"$ref":"#/components/schemas/Topic"}}}},"GitOP":{"title":"GitOP","enum":["push","pull"],"type":"string","description":"An enumeration."},"Grade":{"title":"Grade","enum":[6,7,8,9,10,11,12],"type":"integer","description":"An enumeration."},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"ResourceList":{"title":"ResourceList","enum":["Whiteboard","Animated","Lab","Interactive","Class Note","Revision Note","Mock Test","Real World","Problem Solving"],"description":"An enumeration."},"ResourceMetadata":{"title":"ResourceMetadata","type":"object","properties":{"resource_metadata":{"title":"Resource Metadata","type":"object","default":{}}}},"Subject":{"title":"Subject","enum":["Biology","Physics","Chemistry","Test","Mew","Science"],"description":"An enumeration."},"Topic":{"title":"Topic","type":"object","properties":{"name":{"title":"Name","type":"string","default":"$name"},"accept":{"title":"Accept","type":"array","items":{"type":"string"},"default":[]},"reject":{"title":"Reject","type":"array","items":{"type":"string"},"default":[]},"subtopics":{"title":"Subtopics","type":"object","additionalProperties":{"$ref":"#/components/schemas/Topic"},"default":{}}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}}}}
